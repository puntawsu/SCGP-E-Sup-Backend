<template>
  <VDialog
    :width="$vuetify.display.smAndDown ? 'auto' : 1200"
    :model-value="props.isDialogVisible"
    @update:model-value="(val) => $emit('update:isDialogVisible', val)"
  >
    <!-- üëâ Dialog close btn -->
    <DialogCloseBtn @click="$emit('update:isDialogVisible', false)" />
    <VCard v-if="props.itemSelect" class=" ">
      <VCardText>
        <!-- üëâ Title -->
        <h4 class="text-h4 text-center mb-2">Supplier</h4>
        <p class="text-body-1 text-center mb-6"></p>
        <!-- {{ itemSelect }} -->
        <!-- <div class="d-flex mb-6">
          <CustomRadiosWithIcon
            
          v-model:sitem.elected-radio="selectedAddress"
            :radio-content="addressTypes"
            :grid-column="{ sm: '6', cols: '12' }"
          />
        </div> -->

        <!-- üëâ Form -->
        <VForm>
          <VRow>
            <VCol cols="12">
              <VCard class="mb-6">
                <VCardText>
                  <div class="ViewSupplier-Title" style="">
                    ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏π‡πà‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à
                  </div>
                  <VRow class="from-zone row m-0">
                    <VCol cols="6">
                      <label for="validationCustom01" class="form-label">
                        <b> ‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏ó‡∏µ‡πà‡∏Ñ‡∏π‡πà‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏à‡∏î‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô </b>
                      </label>
                      {{ item.partner_type }}
                      <AppTextField
                        type="text"
                        class="form-sup-custom"
                        readonly
                        id="validationCustom01"
                        v-model="item.partner_type"
                      />
                    </VCol>
                    <VCol cols="6">
                      <label for="validationCustom01" class="form-label">
                        <b> ‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏ú‡∏π‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏†‡∏≤‡∏©‡∏µ‡∏≠‡∏≤‡∏Å‡∏£ </b>
                      </label>
                      <AppTextField
                        type="text"
                        class="form-sup-custom"
                        readonly
                        id="validationCustom01"
                        v-model="item.tax_id"
                      />
                    </VCol>
                    <VCol cols="6">
                      <label for="validationCustom01" class="form-label">
                        <b> ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ </b>
                      </label>
                      <AppTextField
                        type="text"
                        class="form-sup-custom"
                        readonly
                        id="validationCustom01"
                        v-model="item.company_name_th"
                      />
                    </VCol>
                    <VCol cols="6">
                      <label for="validationCustom01" class="form-label">
                        <b> ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© </b>
                      </label>
                      <AppTextField
                        type="text"
                        class="form-sup-custom"
                        readonly
                        id="validationCustom01"
                        v-model="item.company_name_en"
                      />
                    </VCol>

                    <VCol cols="6">
                      <label for="validationCustom01" class="form-label">
                        <b> ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó </b>
                      </label>
                      <AppTextField
                        type="text"
                        class="form-sup-custom"
                        readonly
                        id="validationCustom01"
                        v-model="item.company_phone_number"
                      />
                    </VCol>

                    <VCol cols="6">
                      <label for="validationCustom01" class="form-label">
                        <b> ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó </b>
                      </label>
                      <AppTextField
                        type="text"
                        class="form-sup-custom"
                        readonly
                        id="validationCustom01"
                        v-model="item.company_web_url"
                      />
                    </VCol>
                  </VRow>
                  <hr style="margin: 1.5rem 0;"/>
                  <div class="ViewSupplier-Title" style="">
                    ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢
                  </div>
                  
                  <VRow>
                    <VCol cols="6">
                      <label for="validationCustom01" class="form-label">
                        <b> ‡∏ä‡∏∑‡πà‡∏≠ </b>
                      </label>
                      <AppTextField
                        type="text"
                        class="form-sup-custom"
                        readonly
                        id="validationCustom01"
                        v-model="item.sales_name"
                      />
                    </VCol>
                    <VCol cols="6">
                      <label for="validationCustom01" class="form-label">
                        <b> ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• </b>
                      </label>
                      <AppTextField
                        type="text"
                        class="form-sup-custom"
                        readonly
                        id="validationCustom01"
                        v-model="item.sales_surname"
                      />
                    </VCol>

                    <VCol cols="6">
                      <label for="validationCustom01" class="form-label">
                        <b> ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢ </b>
                      </label>
                      <AppTextField
                        type="text"
                        class="form-sup-custom"
                        readonly
                        id="validationCustom01"
                        v-model="item.sales_phone_number"
                      />
                    </VCol>

                    <VCol cols="6">
                      <label for="validationCustom01" class="form-label">
                        <b> ‡∏≠‡∏µ‡πÄ‡∏°‡∏• </b>
                      </label>
                      <AppTextField
                        type="email"
                        class="form-sup-custom"
                        readonly
                        id="validationCustom01"
                        v-model="item.sales_email"
                      />
                    </VCol>
                  </VRow>
                  <hr style="margin: 1.5rem 0;"/>
               
                  <div class="ViewSupplier-Title" style="">
                    ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                  </div>
                  <VRow class="from-zone row justify-content-between m-0">
                    <VCol cols="6">
                      <label for="validationCustom01" class="form-label">
                        <b> ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à </b>
                      </label>
                      <AppTextField
                        type="text"
                        class="form-sup-custom"
                        readonly
                        id="validationCustom01"
                        v-model="item.product_business_type"
                      />
                    </VCol>

                    <VCol cols="6">
                      <label for="validationCustom01" class="form-label">
                        <b> ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à </b>
                      </label>
                      <AppTextField
                        type="text"
                        class="form-sup-custom"
                        readonly
                        id="validationCustom01"
                        v-model="item.product_business_category"
                      />
                    </VCol>

                    <VCol cols="6">
                      <label for="validationCustom01" class="form-label">
                        <b> ‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ </b>
                      </label>
                      <AppTextField
                        type="text"
                        class="form-sup-custom"
                        readonly
                        id="validationCustom01"
                        v-model="item.product_brand"
                      />
                    </VCol>
                    <VCol cols="6">
                      <label for="customFileAppTextField" class="form-label">
                        <b> ‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö </b>
                      </label>
                      <div v-if="item.partner_file">
                        <img
                          @click="viewExistingFile()"
                          :src="'/images/pdf.png'"
                          alt="media"
                          class="img-fluid"
                          style="width: 50px; height: 50px"
                        />
                      </div>
                      <div v-else>(‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö‡∏°‡∏≤)</div>
                    </VCol>
                  </VRow>
                </VCardText>
              </VCard>
            </VCol>

            <VCol cols="12" class="text-center">
              <VBtn
                variant="tonal"
                color="primary"
                @click="$emit('update:isDialogVisible', false)"
              >
                close
              </VBtn>
            </VCol>
          </VRow>
        </VForm>
      </VCardText>
    </VCard>
  </VDialog>
</template>
<script setup>
import { useLoadingStore } from "@/stores/loading";
import { defineEmits, defineProps } from "vue";
import { fetchGet } from "/services/fetch.js"; // Import your fetchPost function

const loadingStore = useLoadingStore();
const props = defineProps({
  isDialogVisible: {
    type: Boolean,
    required: true,
  },
  itemSelect: {
    type: Number,
    required: false,
  },
});
let item = ref(null);

item.value = {
  partner_type: "",
  tax_id: "",
  company_name_th: "",
  company_name_en: "",
  company_phone_number: "",
  company_web_url: "",
  sales_name: "",
  sales_surname: "",
  sales_phone_number: "",
  sales_email: "",
  product_business_type: "",
  product_business_category: "",
  product_brand: "",
  partner_file: "",
};

const emit = defineEmits(["update:isDialogVisible", "submit"]);
const setEditform = async () => {
  if (props.itemSelect) {
    item.value = await fetchGet(
      `/vendor/get-partner-by-id/${props.itemSelect}`
    );
  }
};

const viewExistingFile = () => {
  console.log("viewExistingFile", item.value.partner_file.path);

  if (item.value.partner_file.path) {
    window.open(item.value.partner_file.path, "_blank");
  }
};

watch(
  () => props.itemSelect,
  (newVal, oldVal) => {
    if (newVal !== oldVal) {
      console.log("watch itemSelect changed", newVal);
      setEditform(); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å setEditform ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
    }
  }
);
</script>
<style scoped>
.v-selection-control__wrapper {
  transform: scale(1.5); /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô 1.5 ‡πÄ‡∏ó‡πà‡∏≤ */
}

.large-switch .v-switch__label {
  font-size: 1.5rem; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á label */
}
.img-fluid {
  cursor: pointer;
}
.form-sup-custom {
  background-color: #fff;
  cursor: pointer;
  :readonly {
    background-color: #fff;
  }
}
</style>
